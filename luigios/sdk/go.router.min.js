/* Go.js SDK by Luis Carlos Hurtado - MIT License - luiscarloshurtado@live.com */
Go.set("nav").start=async function(){document.body.onclick=function(t){Go.do("nav/event",t)},window.addEventListener("popstate",function(){Go.do("nav.fetch",Go.route.pathname())}),Go.config("routerPreventAutoStart")||Go.do("nav.fetch",Go.route.pathname())},Go.set("nav").event=function(t){var[e,o]=[t.target.href,"_blank"===t.target.target];return o||e&&(Go.prevent(t),Go.do("nav.push",e)),this},Go.set("nav").isRegExp=function(t){if(t instanceof RegExp)return!0;if("string"!=typeof t)return!1;if(/^[a-zA-Z0-9/_:-]+[*]?$/.test(t))return!1;if(!/[.*+?^${}()|[\]\\]/.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}},Go.set("nav").getRouteFullHash=(t=null)=>{if(window.location.hash)return t=views[window.location.hash]||views[window.location.hash+"/"],(t||=views[Go.route.pathname()+window.location.hash])||views[Go.removeLastStringIf(window.location.hash,"/")]},Go.set("nav").getRoute=function(t=Go.route.pathname(),e=window.views){let o=Go.do("nav/getRouteFullHash"),a=Go.url(Go.base()).removeHost(),r=location.href.split(a)[1];return o=(o=(o||=e[t]||e[Go.route.pathname()]||e["/"+Go.route.pathname()])||(e[Go.route.pathname()+"/"]||e["/"+Go.route.pathname()+"/"]))||e[Go.removeLastStringIf(Go.route.pathname(),"/")],o=r?(o=(o=(o=(o||=e[r])||e["/"+r])||e[r+"/"])||e["/"+r+"/"])||e[Go.removeLastStringIf(r,"/")]:o},Go.set("nav").getRouteByName=function(e){let[o,a]=[!1,Object.keys(views)];if(e)for(let t=0;t<a.length;t++){var r=[a[t],views[a[t]]][1];if(r.name===e){o=r;break}}return o},Go.set("nav").getView=function(t=Go.route.pathname()){let e=Go.do("nav/getRoute",t);return e=(e=(e||=Go.do("nav/getRouteGlobal",t))||Go.do("nav/getRouteByName",t))||views[404],e=Go.is(e,"function")?e():e},Go.set("nav").if=async function(route={}){let[si,can,_route]=[!1,!0,{...route,if:!1}];return route.if&&Go.is(route.if,"function")?(si=!0,can=await route.if()):Go.is(route.if,"set")&&(si=!0,can=await eval(route.if)),si&&!can&&Go.is(route.else,"function")?_route=await route.else():si&&!can&&Go.is(route.else,"string")?_route=eval(route.else):si&&!can&&(_route=route.else),_route&&_route.if?await Go.do("nav/if",_route):_route},Go.set("nav").fetch=async function(t=Go.route.pathname()){let[e,o]=[t,null];if(e&&(e.isChild||(e=await Go.do("nav/getView",t)),(e=Go.is(e,"function")?await e():e).if&&(e=await Go.do("nav/if",e)),e||=Go.do("nav/getRouteByName","404"))&&!e.break){if(e.uuid=Go.uuid(),o=Go.config("currentRoute")||{},this.alreadyOnRoute=!e.isChild&&e.key&&o.key===e.key,!this.alreadyOnRoute){e.isChild||Go.config("currentRoute",e),e.loader=await Go.loader(Go.config("loaderSelector")),e.loaderId=e.loader.id,Go.emit("beforeRoute",e),Go.is(e.beforeRoute,"function")&&await e.beforeRoute(),e.components||=[];let a=e.headers||{};Go.is(a,"function")&&(a=await a()),await Go.for(e.styles,t=>{Go.load(Go.eval(t))}),await Go.for(e.components,async e=>{var o=document.querySelector(Go.eval(e.target));if(o){Go.attrs(o,{state:"leaving"});let t="";try{t=await Go.xhr(Go.eval(e.src),{responseType:"text",headers:a})}catch(e){t=Go.getErrorMessage(e)}Go.attrs(o,{state:"rendering"}),Go.html(o,Go.eval(t)),await Go.sleep(100),Go.attrs(o,{state:"rendered"}),await Go.sleep(100),Go.attrs(o,{state:"loaded"}),o.scrollIntoView()}});if(e.html&&e.target){let t=document.querySelector(Go.eval(e.target));(t=t||await Go.awaitElement(Go.eval(e.target),{timeout:1e4}))&&await(async t=>{if(Go.attrs(t,{state:"leaving"}),Go.is(e.html,"function"))e.html=await e.html();else if(Go.is(e.html,"path"))try{e.html=await Go.xhr(Go.eval(e.html),{responseType:"text",headers:a})}catch(t){e.html=Go.getErrorMessage(t)}return Go.attrs(t,{state:"rendering"}),Go.is(e.html,"HTMLElement")?(t.innerHTML="",t.append(e.html)):Go.html(t,Go.eval(e.html)),await Go.sleep(100),Go.attrs(t,{state:"rendered"}),await Go.sleep(100),Go.attrs(t,{state:"loaded"}),t.scrollIntoView(),Promise.resolve()})(t)}e.scripts||=[],e.script&&Go.is(e.script,"string")?e.scripts.push({src:e.script}):e.script&&Go.is(e.script,"object")&&e.scripts.push(e.script),await Go.for(e.scripts,t=>{Go.load(Go.eval(t.src),{...t})}),e.module&&await Go.do("nav/module",e),e.title&&Go.docTitle(Go.eval(e.title));var r=e.onRoute||e.onroute||e.fn||e.function||e.do,i={route:e,path:Go.route.pathname()};Go.is(r,"function")?r(i):r&&Go.eval(r),Go.emit("route",i),await Go.sleep(100),document.body.scrollTop=0;try{await Go.do("nav/children",e)}catch(t){}return e.loader&&Go.is(e.loader.close,"function")&&e.loader.close(),Go.is(e.afterRoute,"function")&&await e.afterRoute(),Go.emit("afterRoute",e)}Go.do("nav/children",e)}},Go.set("nav").children=async function(o={}){if(Go.do("nav/markLinks"),o.routes||=o.views,o.routes){Go.is(o.routes,"function")&&(o.routes=await o.routes());let t=Go.route.pathname().split(o.parent)[1]||"/",e=o.routes[t]||o.routes[t+"/"];return(e=(e=(e=(e||=o.routes[Go.removeLastStringIf(t,"/")])||(o.routes["/"+t]||o.routes["/"+t+"/"]))||await Go.do("nav/getChildrenRouteGlobal",t,o.routes))||(o.routes["*"]||o.routes["/*"]))?(Go.is(e,"function")&&(e=await e()),Go.config("current/"+o.parent,e),e.isChild=!0,Go.do("nav/fetch",e)):void 0}},Go.set("nav").getRouteGlobal=function(e=Go.route.pathname()){let[o,t,a]=[!1,0,Object.keys(views)];for(a.sort((t,e)=>e.length-t.length),t=0;t<a.length;t++){var r=a[t];if(Go.do("nav/isRegExp",r))try{let t=e.match(new RegExp(r));if(o=t?views[r]:o)break}catch(e){}if(Go.includes(r,"*")){var i=Go.removeLastStringIf(r.split("*")[0],"/");if(Go.includes(e,i)){o=views[r];break}}}return o},Go.set("nav").getChildrenRouteGlobal=function(e,o){let[a,t,r]=[!1,0,Object.keys(o)];for(r.sort((t,e)=>e.length-t.length),t=0;t<r.length;t++){var i=r[t];if(Go.do("nav/isRegExp",i))try{let t=e.match(new RegExp(i));if(a=t?o[i]:a)break}catch(e){}if(Go.includes(i,"*")){var n=Go.removeLastStringIf(i.split("*")[0],"/");if(e.startsWith(n)){a=o[i];break}}}return a},Go.set("nav").module=async function(t){return this.module=await Go.module({src:t.module,props:t.props}),this.template=this.module.template,this.render=this.module.render,this.target=this.module.target,Go.is(this.template,"function")&&(this.template=await this.template()),this.target&&this.template&&Go.html(this.target,this.template),this.module},Go.set("nav").push=function(t,e={}){t=Go.fix(t).url(),window.history.pushState({},"",t),(e.refresh||e.force)&&Go.config("currentRoute",{}),window.dispatchEvent(new Event("popstate"))},Go.set("nav").refresh=function(){Go.config("currentRoute",{}),window.dispatchEvent(new Event("popstate"))},Go.set("nav").query=function(t={}){let e=window.location.href,o=window.location.hash,a=window.location.search,r=e.replace(a,"");r=r.replace(o,"");t=Go.removeFirstIf(a,"?")+"&"+Go.serializeObject(t),t=Go.quitDuplicateQuery(t),t=r+"?"+t+o;Go.do("nav/push",t),Go.do("nav/refresh")},Go.set("nav").isHome=()=>"home"===(Go.config("currentRoute")||{}).name||Go.base()===location.href,Go.set("nav").markLinks=function(){this.links=document.querySelectorAll("a"),this.style="",Go.for(this.links,t=>{location.href===t.href?t.classList.add("active"):t.classList.remove("active")});var t=Go.url(location.href).removeBase();this.style+=`[href="${t}"],`,this.style+=`[href="${Go.route.pathname()}"],`,this.style+=`[href="${Go.host("",Go.route.pathname())}"] {`,this.style+="color: var(--link-active-color);",this.style+="background-color: var(--link-active-background);",this.style+="border-radius: var(--link-active-border-radius, inherit);",this.style+="}",this.style+=`[parent*="${t}"],`,this.style+=`[parent*="${Go.route.pathname()}"],`,this.style+=`[parent*="${Go.host("",Go.route.pathname())}"] {`,this.style+="color: var(--link-active-color-parent);",this.style+="background-color: var(--link-active-background-parent);",this.style+="border-radius: var(--link-active-border-radius, inherit-parent);",this.style+="}",Go.cssTag("go-router",this.style)};